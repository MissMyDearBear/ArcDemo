## 垃圾回收机制

#### java的引用类型
- 强引用： 不可回收
- 软引用： 内存不够的时候回收
- 弱引用： GC的时候回收
- 虚引用： 仅做标记，无法获取对象，与队列搭配使用


####  标记算法
- 引用计数法， 循环引用的缺点
- 可达性分析，从GcRoot 对象向下标记可达性，未标记的当作垃圾回收，java中GCRoot有：
1. 虚拟机的引用对象
2. 方法区中的类静态属性引用对象
3. 方法区中的常量引用对象
4. 本地方法栈中的JNI的引用对象


#### 垃圾回收算法
- 标记清除法（标记和清除的过程中效率低，收集完后会有空间碎片，空间利用率低）
- 复制算法（分为两块区域，将其中一块存活的对象复制到另一块区域，将当前的区域清除，适用于新声代存活率低的场景，减少复制的时间）
- 标记整理算法（标记存活的对象，然后将存活的对象统统移动到一段区，然后清理掉边界意外的内存，适合高存活的对象，老年代）
- 分代收集算法（新生代的存活率低，采用复制算法。老年代适用标记清除或者标记整理）

java分代：

- 新生代： 有eden 和两个Survivor组成8：1：1。eden和s1中存活的对象复制到s2中，然后清理eden和s1
- 老年代： 老年代存放新生代多次gc存活下来的生命周期较长的对象，当老年代也满了就会触发FullGc。
- 永久代： 存放静态文件，java类方法等。